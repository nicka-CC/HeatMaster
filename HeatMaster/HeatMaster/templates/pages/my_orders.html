{% extends './layout.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/thermostats.css' %}">
{% endblock %}

{% block content %}
<div class="content">
    <div class="padding"></div>
    <div class="content_info">
        <div class="bread_crumps"><a href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a> / <div class="bread_crump">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div></div>

        <div class="orders-container">
            <h2 class="orders-title">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
            
            {% if orders %}
                {% for order in orders %}
                <div class="white-box order-card-wrapper">
                    <div class="order-header-info">
                        <div class="order-header-left">
                            <div class="order-number">–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}</div>
                            <div class="order-date">{{ order.created_at|date:"d.m.Y –≤ H:i" }}</div>
                        </div>
                        <span class="status-badge status-{{ order.status }}">{{ order.get_status_display }}</span>
                    </div>
                    
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>–¢–æ–≤–∞—Ä</th>
                                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°—É–º–º–∞</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for it in order.items.all %}
                            <tr>
                                <td class="order-item-name">{{ it.thermostat.name }}</td>
                                <td class="order-item-qty">{{ it.quantity }} —à—Ç.</td>
                                <td class="order-item-price">{{ it.price_at_purchase|floatformat:2 }} –≥—Ä–Ω.</td>
                                <td class="order-item-total">{{ it.subtotal|floatformat:2 }} –≥—Ä–Ω.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            {% if order.shipping_address %}
                            <tr class="order-info-row">
                                <td colspan="2" class="order-info-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</td>
                                <td colspan="2" class="order-info-value">{{ order.shipping_address }}</td>
                            </tr>
                            {% endif %}
                            {% if order.comment %}
                            <tr class="order-info-row">
                                <td colspan="2" class="order-info-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</td>
                                <td colspan="2" class="order-info-value">{{ order.comment }}</td>
                            </tr>
                            {% endif %}
                            <tr class="order-total-row">
                                <td colspan="3" class="order-total-label">–ò—Ç–æ–≥–æ:</td>
                                <td class="order-total-value">{{ order.total_amount|floatformat:2 }} –≥—Ä–Ω.</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                {% endfor %}
            {% else %}
                <div class="orders-empty">
                    <div class="orders-empty-icon">üì¶</div>
                    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                    <a class="btn-start-shopping" href="{% url 'thermostat_list' %}">–ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="padding2"></div>
</div>
{% endblock %}




